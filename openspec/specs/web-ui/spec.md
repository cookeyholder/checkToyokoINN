# web-ui Specification

## Purpose
TBD - created by archiving change add-room-availability-checker. Update Purpose after archive.
## Requirements
### Requirement: 網頁應用程式部署
系統 SHALL 提供一個可透過瀏覽器存取的網頁應用程式介面。

#### Scenario: 使用者開啟網頁應用程式
- **WHEN** 使用者訪問已部署的 Web App URL
- **THEN** 應顯示完整的使用者介面,包含輸入表單和提醒清單

#### Scenario: 未授權使用者存取
- **WHEN** 未授權的使用者嘗試存取
- **THEN** 應顯示授權請求畫面

### Requirement: 提醒建立表單
系統 SHALL 在網頁上半部提供表單,讓使用者輸入房間檢查的所有必要參數。

#### Scenario: 顯示完整表單欄位
- **WHEN** 頁面載入完成
- **THEN** 表單應包含以下欄位:
  - 東橫 INN 分店 (select 下拉選單)
  - 房型 (複選框: 單人房/雙人房/雙床房/三人以上房,允許選擇多個)
  - 成人人數 (數字輸入)
  - 房間數 (數字輸入)
  - 入住日期 (date picker,不允許選取今天之前的日期)
  - 退房日期 (date picker,不允許選取今天之前的日期)
  - 提醒開始時間 (時間選擇器)
  - 提醒結束時間 (時間選擇器)
  - 提交按鈕

#### Scenario: 分店選項從試算表載入
- **WHEN** 表單初始化
- **THEN** 東橫 INN 分店 select 下拉選單的選項應從試算表的「東橫INN分店」工作表讀取
- **AND** 選項顯示格式為: 分店名稱 (option text) 對應分店編號 (option value)
- **AND** 例如: `<option value="00066">東京新宿店</option>`

#### Scenario: 成功提交表單
- **WHEN** 使用者填寫所有必填欄位並點擊提交
- **THEN** 系統應處理選擇的房型清單
- **AND** 為每個選擇的房型建立一筆獨立的提醒記錄
- **AND** 所有提醒使用相同的分店、日期、時間等設定
- **AND** 自動記錄當前使用者的 Email 地址
- **AND** 重新載入提醒清單
- **AND** 清空表單欄位

#### Scenario: 房型複選處理
- **WHEN** 使用者選擇多個房型 (例如: 單人房、雙床房)
- **THEN** 系統應為每個房型建立獨立的提醒記錄
- **AND** 每筆記錄僅包含一個 roomType 參數
- **AND** 顯示建立成功的訊息和總提醒數量

#### Scenario: 單一房型選擇
- **WHEN** 使用者僅選擇一個房型
- **THEN** 系統應建立一筆提醒記錄
- **AND** 行為與舊版本一致

#### Scenario: 表單驗證失敗
- **WHEN** 使用者提交不完整或無效的資料
- **THEN** 應顯示清楚的錯誤訊息
- **AND** 不應儲存資料到試算表

### Requirement: 日期選擇限制
系統 SHALL 在日期選擇器中限制可選擇的日期範圍。

#### Scenario: 限制過去日期選擇
- **WHEN** 使用者開啟入住日期或退房日期的 date picker
- **THEN** date picker 應設定最小日期為今天
- **AND** 今天之前的日期應顯示為不可選擇狀態
- **AND** 使用者無法點擊或選取過去的日期

#### Scenario: 入住日期變更時更新退房日期限制
- **WHEN** 使用者選擇入住日期
- **THEN** 退房日期的 date picker 最小日期應自動更新為入住日期 + 1 天
- **AND** 確保退房日期至少比入住日期晚 1 天

#### Scenario: 日期選擇器初始狀態
- **WHEN** 表單首次載入
- **THEN** 入住日期 date picker 的最小日期應為今天
- **AND** 退房日期 date picker 的最小日期應為今天 + 1 天

### Requirement: 提醒清單顯示
系統 SHALL 在網頁下半部顯示所有已排程的提醒清單。

#### Scenario: 載入現有提醒
- **WHEN** 頁面載入或重新整理
- **THEN** 應從試算表讀取所有提醒
- **AND** 以表格形式顯示,包含以下欄位:
  - 東橫INN分店名稱
  - 入住日期
  - 退房日期
  - 成人人數
  - 房間數
  - 提醒開始時間
  - 提醒結束時間
  - 提醒狀態 (啟用/暫停)
  - 暫停/啟用按鈕
  - 刪除按鈕

#### Scenario: 提醒清單為空
- **WHEN** 試算表中沒有任何提醒
- **THEN** 應顯示友善的提示訊息 (例如: "目前沒有排程的提醒")

### Requirement: 提醒刪除功能
系統 SHALL 允許使用者刪除已建立的提醒。

#### Scenario: 成功刪除提醒
- **WHEN** 使用者點擊某個提醒的刪除按鈕
- **THEN** 系統應從試算表移除該筆提醒
- **AND** 重新載入提醒清單
- **AND** 顯示刪除成功的確認訊息

#### Scenario: 刪除前確認
- **WHEN** 使用者點擊刪除按鈕
- **THEN** 應顯示確認對話框
- **AND** 僅在使用者確認後才執行刪除

### Requirement: 使用者介面響應式設計
系統 SHALL 提供清晰易用的介面,適應不同螢幕尺寸。

#### Scenario: 桌面瀏覽器檢視
- **WHEN** 使用者在桌面瀏覽器開啟
- **THEN** 表單和清單應以適當的寬度和間距顯示

#### Scenario: 行動裝置檢視
- **WHEN** 使用者在手機或平板開啟
- **THEN** 表單和清單應自動調整為單欄布局
- **AND** 所有互動元素應保持可點擊的大小

### Requirement: 提醒狀態切換
系統 SHALL 允許使用者在提醒清單中切換提醒的啟用/暫停狀態。

#### Scenario: 切換為暫停狀態
- **WHEN** 使用者點擊某個提醒的暫停按鈕
- **THEN** 系統應更新該提醒的狀態為「暫停」
- **AND** 更新試算表資料
- **AND** 重新載入提醒清單
- **AND** 該提醒應以視覺方式標示為暫停 (例如: 灰色背景)

#### Scenario: 切換為啟用狀態
- **WHEN** 使用者點擊某個暫停提醒的啟用按鈕
- **THEN** 系統應更新該提醒的狀態為「啟用」
- **AND** 更新試算表資料
- **AND** 重新載入提醒清單
- **AND** 該提醒恢復正常顯示

### Requirement: 批次新增提醒
系統 SHALL 提供批次新增多個提醒的功能。

#### Scenario: 批次新增界面
- **WHEN** 使用者選擇批次新增模式
- **THEN** 應顯示批次輸入界面
- **AND** 允許選擇單一分店
- **AND** 允許複選多個房型
- **AND** 提供入住日期和退房日期選擇 (不展開為多天)
- **AND** 系統為每個選擇的房型建立獨立的提醒

#### Scenario: 批次新增執行
- **WHEN** 使用者提交批次新增表單
- **THEN** 系統應根據選擇的房型
- **AND** 為每個房型建立一筆提醒記錄
- **AND** 所有提醒使用相同的分店、入住日期、退房日期、人數、時間設定
- **AND** 所有提醒記錄當前使用者的 Email
- **AND** 顯示批次新增成功的訊息和建立的提醒數量

#### Scenario: 批次新增複選房型範例
- **WHEN** 使用者選擇 2 個房型 (例如: 單人房、雙床房)
- **AND** 設定入住日期 2025-11-15,退房日期 2025-11-18 (共 3 晚)
- **THEN** 系統應建立 2 筆提醒記錄
- **AND** 提醒 1: 單人房,2025-11-15 至 2025-11-18
- **AND** 提醒 2: 雙床房,2025-11-15 至 2025-11-18

#### Scenario: 批次新增驗證
- **WHEN** 使用者提交批次新增但資料不完整
- **THEN** 應顯示清楚的錯誤訊息
- **AND** 不建立任何提醒

### Requirement: 檢查歷史檢視
系統 SHALL 提供檢視特定提醒檢查歷史的功能。

#### Scenario: 開啟檢查歷史
- **WHEN** 使用者點擊某個提醒的「檢視歷史」按鈕或連結
- **THEN** 應顯示該提醒的檢查歷史記錄
- **AND** 以時間倒序排列 (最新的在上)

#### Scenario: 歷史記錄內容
- **WHEN** 顯示檢查歷史
- **THEN** 每筆記錄應包含:
  - 檢查時間
  - 檢查結果 (有空房/無空房/錯誤)
  - 是否發送通知
  - 錯誤訊息 (如果有)

#### Scenario: 無歷史記錄
- **WHEN** 某個提醒尚未執行過檢查
- **THEN** 應顯示「尚無檢查記錄」的提示訊息

